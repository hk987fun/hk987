<!DOCTYPE html>

<!--欢迎来到hk987，人类的进化就靠你了-->
 <!--
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░ ░▒▓██████▓▒░░▒▓████████▓▒░ 
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ 
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░░░░░░▒▓█▓▒░ 
░▒▓████████▓▒░▒▓███████▓▒░░░▒▓███████▓▒░░▒▓██████▓▒░░░░░░▒▓█▓▒░  
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░░░░░░▒▓█▓▒░░░▒▓█▓▒░▒▓█▓▒░░░░░▒▓█▓▒░  
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░░░░░░▒▓█▓▒░░░▒▓█▓▒░▒▓█▓▒░░░░▒▓█▓▒░   
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░ ░▒▓██████▓▒░░░░▒▓█▓▒░
-->
<!--前进!不择手段的前进-->
<!--Copyright©hk987.fun-->
<!--PC端Google和Firefox支持良好,移动端支持良好-->

<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
	<meta name="description" content="hk987-你在世俗里的名字不重要了">
	<meta name="author" content="hk987">
	<meta name="keywords" content="hk987,hk987.fun,hack987,黑客987,黑客学习,Windows技术,Linux技术,Archlinux,Linux软件,漏洞挖掘,网络安全,渗透测试,自动化办公,python全自动办公,Windows系统激活,新手学电脑,IT技术,Rust,Rust编程,黑客技术,黑客,红客,honker,hack,hacker,网络安全,信息安全,网络安全学习,计算机小白,网安入门,网络安全入门,渗透测试,黑客技术,网络基础入门,操作系统,新手学电脑,小白学电脑,hack学习,hack入门,Windows基础,linux基础,Archlinux基础,Rust基础,Rust入门,Rust编程基础,黑客入门,Ubuntu入门,Manjaro,Endeavouros,红帽系统,centos基础学习,Rocky系统基础,Linux基础命令,Windows批处理,Windows安全,Linux安全,Kali基础,Kali渗透测试,KaliLinux,BlackArch,Github,加密解密,具体数学,线性代数,离散数学,红队攻防,蓝队攻防,黑客靶场练习,黑客靶场,黑客实战,hack实战,hack编程,黑客编程">
	<title>[Linux基础]-7-Linux用户权限管理 - hk987.fun - www.hk987.fun</title>
	<link rel="shortcut icon" type="image/x-icon" href="../logo/favicon.png">
	<link rel="stylesheet" type="text/css" href="../css/basic.css">
	<link rel="stylesheet" type="text/css" href="../css/home.css">
	<link rel="stylesheet" type="text/css" href="../css/text.css">
	<!--prism.js代码高亮模块-->
	<link rel="stylesheet" href="../css/prism.css" data-noprefix />
	<script src="../plugins/prism.js"></script>
	<!--/prism.js代码高亮模块-->
</head>
<body>
	<!--header -->
	<header id="nav">
			<div class="nav-container">
				<!-- 根大纲-->
				<a href="../index.html" title="Hk987首页">
					<h1 class="nav-logo">HK987 - hk987.fun</h1>
				</a>
				<h2 class="nav-site-description desc-hidden">
					 S=−k∑pilnpi
				</h2>
				<nav class="nav-links">
					<!-- nav连接大纲-->
					<h1 style="display:none;">网站导航</h1>
					<ul>
						<li>
							<a href="../index.html" title="sitemap">
								<span class="link-word"><img src="../logo/archives.png" alt="archives" class="link-img"><span class="word-hidden">wiki</span></span>
							</a>
						</li>
					</ul>
				</nav>
			</div>
	</header>
	<!-- /header -->

	<!-- content-->
	<div id="content">
		<div class="content-container">
			<!-- 文章区 -->
			<article class="text-container">
				<header class="text-header">
					<h1>[Linux基础]-7-Linux用户权限管理</h1>	
				</header>
				<section class="text-body">
					<h2>引言</h2>
					<p>这篇文章主要介绍Linux中用户权限的基础知识；主要包括sudo的用法，su和su -的用法与区别介绍。</p>
					<!-- 目录 -->
					<h2>文章目录</h2>
					<ul class="contents">	
						 <li><a href="#Linux-users-sudoers-1">0×1.Linux用户sudo权限管理</a></li>
						 <li><a href="#Linux-users-su-2">0×2.Linux使用su切换用户</a></li>
					 </ul>
					<!-- /目录 -->

					<!-- 正文 -->
					
					<h2 id="Linux-users-sudoers-1">0×1.Linux用户sudo权限管理</h2>

					<p>★ 什么是 sudo：</p>
					<p>● sudo 的全称是 "superuser do"。它可以授予普通用户执行特定系统管理任务的权限，而无需以 root 用户身份登录。这提高了系统的安全性，因为用户无需知道或使用 root 密码</p>
					<p>● sudo 可以通过配置文件  /etc/sudoers 来控制哪些用户可以执行哪些命令。这样可以限制权限，确保用户只能够执行他们被授权的任务</p>
					<p>● sudo 会记录所有使用  sudo 执行的命令。 这些日志可以帮助系统管理员审计和监控系统的使用 </p>
					<p>● 使用  sudo 验证成功后，用户在短时间内（默认是 15 分钟）执行  sudo 命令时不需要再次输入密码，这段时间可以通过配置调整</p>
					<p>● 使用 sudo 命令后，可以使用 sudo -k 来清除 sudo 会话缓存，以便下次使用 sudo 时需要重新输入密码</p>
					<p>● sudo无法用于shell的内建命令（例如cd），这是因为cd命令不是一个独立的可执行文件</p>

					<p>★ /etc/sudoers 配置文件语法格式：</p>
					<pre data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'>
					<code class="language-bash">
					#示例-1
					#下面这一条配置个字段的含义如下
					#第一个root代表用户名称，这里是root账户
					#第一个 ALL 表示该规则适用于所有主机。如果有多台主机共享同一个 sudoers 文件，该规则将在所有主机上生效
					#(ALL:ALL)中第一个ALL 表示用户可以以任何用户的身份运行命令，第二个ALL表示用户可以以任何组的身份运行命令
					#整条配置的最后一个 ALL 表示用户可以运行所有命令
					root ALL=(ALL:ALL) ALL

					#示例-2
					#代表用户hk987可以在所有共享这个sudoers文件的主机上，以任何用户身份，任何组身份，无需密码（NOPASSWD）运行所有命令
					hk987 ALL=(ALL:ALL) NOPASSWD: ALL

					#示例-3
					#代表hk987可以在所有共享这个sudoers文件的主机上，以www-data用户或www-data组的身份，执行“/usr/bin/systemctl restart apache2”这条命了
					hk987 ALL=(www-data:www-data) /usr/bin/systemctl restart apache2

					#示例-4
					#代表hk987可以在所有共享这个sudoers文件的主机上，以任何用户和组身份，执行后面的apt或vim程序（将所有需要给与权限的程序用英文逗号隔开）
					hk987 ALL=(ALL:ALL) /usr/bin/apt, /usr/bin/vim

					#示例-5
					#用%号开头可以指定一个组，所以这条配置的意思就是，所有在wheel组下的用户可以在所有共享这个sudoers文件的主机上，以任何用户和组身份，不用密码执行/usr/bin/python3程序
					#wheel 组是一个特别的用户组，通常用于限制哪些用户可以使用 sudo 命令来获得超级用户权限。
					#这是一种安全措施，确保只有经过特别授权的用户才能执行需要超级用户权限的操作。
					%wheel ALL=(ALL:ALL) NOPASSWD: /usr/bin/python3

					#示例-6
					#includedir用于包含指定目录中的所有配置文件
					#这种方法使得 sudo 配置更加模块化和易于管理
					#通过将不同用户或组的配置分散到多个文件中，可以更轻松地管理权限，并减少出错的可能性
					#在被包含的目录中，可以自定义任意名字的sudoers配置文件，只要配置文件中包含的语法不出错就行
					@includedir /etc/sudoers.d
					</code>
					</pre>

					<h2 id="Linux-users-su-2">0×2.Linux使用su切换用户</h2>
					<p>su的用法有两种，分别是"su"和"su -"，下面是它们的区别：</p>
					<p>● su（substitute user 或 switch user）允许当前用户切换到另一个用户身份，默认为 root 用户</p>
					<p>● 使用 su 需要知道目标用户的密码（例如，切换到 root 用户需要输入 root 密码）</p>
					<p>● 默认情况下，su 不会改变当前的环境变量（例如路径、主目录等）</p>
					<p>● su - 类似于 su，但会模拟目标用户的登录环境，包括加载该用户的环境变量、启动文件（如 .bash_profile 或 .profile）等</p>
					<p>● 与 su 一样，使用 su - 需要输入目标用户的密码</p>
					<p>● su - 会加载目标用户的完整环境，使其更接近一个新登录会话</p>

					<p>使用方法演示：</p>
					
					<pre data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'>
					<code class="language-bash">
					#直接使用su命令，默认切换到root用户，且不会改变当前的环境变量
					987@hk987.fun:~$ su 
					#用sudo命令实现
					987@hk987.fun:~$ sudo -s

					#直接使用su -命令，默认切换到root用户，改变当前的环境变量为root用户的环境变量
					987@hk987.fun:~$ su -
					#用sudo命令实现
					987@hk987.fun:~$ sudo -i

					#指定切换到某个用户，例如hk987用户
					987@hk987.fun:~$ su hk987

					#指定切换到某个用户且改变当前的环境变量为hk987用户的环境变量
					987@hk987.fun:~$ su - hk987

					#如果你只需要在一个命令中切换目录并执行一个操作，可以使用 sudo 与 bash -c 结合来临时切换目录
					#使用sudo命令启动bash然后使用-c参数执行命令（bash会暂时获得当前用户sudo权限）
					987@hk987.fun:~$ sudo bash -c 'cd /root && ls -la'
					</code>
					</pre>

					<!-- /正文 -->

				<footer class="text-footer">
					<p>
						*转载请注明来自:<a title="hk987.fun" style="color: rgb(4,181,150);" href="https://www.hk987.fun" target="_blank">hk987.fun</a>
					</p>
					<p>*原文连接:<a title="[Linux基础]-7-Linux用户权限管理" style="color: rgb(4,181,150);" href="https://www.hk987.fun/hk/Linux-basic-7.html" target="_blank">https://www.hk987.fun/hk/Linux-basic-7.html</a></p>
				</footer>
			</article>
			<!-- /文章区 -->	
		</div>
	</div>
	<!-- /content -->
	
	<!-- footer -->
	<footer id="footer">
		<div class="footer-container">
			hk987.fun &nbsp;<img src="../logo/copyright.png" alt="未经作者允许,禁止任何形式的复制与转载" title="未经作者允许,禁止任何形式的复制与转载">&nbsp;All Rights Reserved.
		</div>
	</footer>
	<!-- /footer -->
</body>
</html>